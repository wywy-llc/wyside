import { SheetsClient } from '../../core/client.js';
import {
  {{featureName}}
} from '../../core/types.js';
{{#if hasCreateOperation}}
import { generateUuid } from '../../core/utils.js';
{{/if}}

/**
 * Universal {{featureName}} repository factory for GAS/Node.js environments
 *
 * ðŸš¨ é‡è¦: client.tsã®SheetsClientã‚’ç›´æŽ¥ä½¿ç”¨
 * SheetsClientã¯IIFEãƒ‘ã‚¿ãƒ¼ãƒ³ã§æ—¢ã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ç›´æŽ¥ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã³å‡ºã™
 *
 * @example
 * ```typescript
 * import { Universal{{featureName}}Repo } from './features/{{featureNameCamel}}/Universal{{featureName}}Repo.js';
 *
 * const repo = Universal{{featureName}}Repo.create(spreadsheetId);
{{#if hasSchema}}
 * const items = await repo.getAll();
 * await repo.create({ title: 'Example' });
{{else}}
 * // TODO: Add example usage
{{/if}}
 * ```
 */
export const Universal{{featureName}}Repo = (() => {
  /**
   * âœ… GASã¨Node.jsã§å®Œå…¨ã«åŒä¸€ã®å®Ÿè£…
   */
  const create = (spreadsheetId: string, sheetName: string = '{{sheetName}}') => {
{{#if hasSchema}}
    // Conversion helpers
    {{{rowToObject}}}

    {{{objectToRow}}}

    // Repository operations
    {{{operationCodes}}}

    return {
      {{{exportsList}}}
    } as const;
{{else}}
    // TODO: Implement operations using SheetsClient
    // Available operations:
    {{#each operations}}
    // - {{{this}}}
    {{/each}}

    return {
      // TODO: Return methods here
    } as const;
{{/if}}
  };

  return { create } as const;
})();
