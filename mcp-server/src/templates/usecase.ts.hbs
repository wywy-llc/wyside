import { {{featureName}} } from '../../core/types.js';
import { Universal{{featureName}}Repo } from './Universal{{featureName}}Repo.js';

/**
 * {{featureName}} use case with methods for managing {{featureName}}s
 *
 * @example
 * ```typescript
 * import { {{featureName}}UseCase } from './features/{{featureNameCamel}}/{{featureName}}UseCase.js';
 *
{{#if hasSchema}}
 * const items = await {{featureName}}UseCase.list();
{{else}}
 * // TODO: Add example usage
{{/if}}
 * ```
 */
export const {{featureName}}UseCase = (() => {
  // Rollup replace plugin will substitute this with actual spreadsheet ID from .env
  // - For GAS build: NODE_ENV=production uses APP_SPREADSHEET_ID_N_PROD
  // - For Node.js development: uses APP_SPREADSHEET_ID_N_DEV at runtime
  const spreadsheetId = '{{schema.spreadsheetIdDev}}';
  const sheetName = '{{schema.sheetName}}';

  // Cache repository instance to avoid redundant creation
  const repo = Universal{{featureName}}Repo.create(spreadsheetId, sheetName);

{{#if hasSchema}}
  /**
   * âœ… GASã¨Node.jsã§å®Œå…¨ã«åŒä¸€ã®å®Ÿè£…
   *
   * Available repository operations: {{{exportsList}}}
   *
   * ğŸ’¡ sheetNameå¤‰æ•°ã®ä½¿ã„æ–¹:
   * - ãƒ­ã‚°å‡ºåŠ›: console.log(`Processing ${sheetName} data...`)
   * - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸: throw new Error(`Failed to update ${sheetName}`)
   * - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç®¡ç†: è¤‡æ•°ã‚·ãƒ¼ãƒˆã‚’æ‰±ã†å ´åˆã®è­˜åˆ¥å­ã¨ã—ã¦ä½¿ç”¨
   *
   * Example implementation (uncomment and modify as needed):
   *
   * const list = async (): Promise<{{featureName}}[]> => {
   *   console.log(`Fetching all records from ${sheetName}...`);
   *   return repo.getAll();
   * };
   *
   * const getById = async (id: string): Promise<{{featureName}} | null> => {
   *   const items = await repo.getAll();
   *   return items.find(item => item.mailId === id) || null;
   * };
   *
   * const create = async (data: Partial<{{featureName}}>): Promise<{{featureName}}> => {
{{#if validation}}
   *   {{{validation}}}
{{/if}}
   *   console.log(`Creating new record in ${sheetName}...`);
   *   return repo.create(data);
   * };
   *
   * const update = async (id: string, updates: Partial<{{featureName}}>): Promise<void> => {
   *   console.log(`Updating record ${id} in ${sheetName}...`);
   *   await repo.update(id, updates);
   * };
   *
   * const deleteById = async (id: string): Promise<void> => {
   *   console.log(`Deleting record ${id} from ${sheetName}...`);
   *   await repo.delete(id);
   * };
   *
   * const searchByStatus = async (status: string): Promise<{{featureName}}[]> => {
   *   const items = await repo.getAll();
   *   return items.filter(item => item.status === status);
   * };
   */

  return {
    // TODO: Export your use case methods here
    // Example: list, getById, create, update, delete: deleteById, searchByStatus
  } as const;
{{else}}
  /**
   * âœ… GASã¨Node.jsã§å®Œå…¨ã«åŒä¸€ã®å®Ÿè£…
   */
  // TODO: Implement use case methods
  // Example pattern:
  //
  // const list = async (): Promise<{{featureName}}[]> => {
  //   return repo.getAll();
  // };
  //
  // const create = async (data: Partial<{{featureName}}>): Promise<{{featureName}}> => {
  //   if (!data.title) throw new Error('Title is required');
  //   return repo.create(data);
  // };
  //
  // const update = async (id: string, updates: Partial<{{featureName}}>): Promise<void> => {
  //   await repo.update(id, updates);
  // };
  //
  // const remove = async (id: string): Promise<void> => {
  //   await repo.remove(id);
  // };

  return {
    // TODO: Return methods here
    // list,
    // create,
    // update,
    // remove,
  } as const;
{{/if}}
})();