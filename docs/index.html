<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      GASé–‹ç™ºã‚¿ãƒ¼ãƒœåŒ–è¨ˆç”» v4.1ï¼šHono x AIãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ»ãƒ¦ãƒ‹ãƒ•ã‚¡ã‚¤ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
    </title>
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        line-height: 1.6;
        color: #333;
        max-width: 900px;
        margin: 20px auto;
        padding: 40px;
        background-color: #ffffff;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
      }
      h1 {
        text-align: center;
        font-size: 2.2em;
        color: #ff5722; /* Hono Orange */
        border-bottom: 3px solid #ff5722;
        padding-bottom: 15px;
        margin-bottom: 40px;
      }
      h2 {
        font-size: 1.6em;
        color: #202124;
        border-left: 5px solid #ff5722;
        padding-left: 15px;
        margin-top: 40px;
        margin-bottom: 20px;
      }
      h3 {
        font-size: 1.3em;
        color: #e64a19;
        margin-top: 25px;
      }
      p,
      li {
        color: #5f6368;
      }
      .section {
        margin-bottom: 30px;
      }
      .highlight-box {
        background-color: #fff3e0;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #ffe0b2;
        margin: 20px 0;
      }
      .warning-box {
        background-color: #fce8e6;
        padding: 20px;
        border-radius: 8px;
        border: 1px solid #fad2cf;
        margin: 20px 0;
        color: #c5221f;
      }
      .highlight-title {
        font-weight: bold;
        color: #e64a19;
        margin-bottom: 5px;
        display: block;
      }
      .warning-title {
        font-weight: bold;
        color: #c5221f;
        margin-bottom: 5px;
        display: block;
      }
      .merit-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }
      .setup-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }
      .merit-card {
        background: #fff;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 20px;
        transition: transform 0.2s;
      }
      .merit-card:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        border-color: #ff5722;
      }
      .setup-card {
        background: #f8f9fa;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 15px;
      }
      .merit-icon {
        font-size: 2em;
        margin-bottom: 10px;
        display: block;
      }
      .tag {
        display: inline-block;
        font-size: 0.75em;
        padding: 2px 8px;
        border-radius: 12px;
        margin-bottom: 10px;
        font-weight: bold;
      }
      .tag-platform {
        background-color: #e6f4ea;
        color: #137333;
      }
      .tag-tech {
        background-color: #e8f0fe;
        color: #1967d2;
      }
      .tag-hono {
        background-color: #fff3e0;
        color: #e64a19;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 20px 0;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }
      th,
      td {
        padding: 15px;
        text-align: left;
        border-bottom: 1px solid #eee;
      }
      th {
        background-color: #f8f9fa;
        color: #202124;
        font-weight: 600;
      }
      code {
        background-color: #f1f3f4;
        padding: 2px 6px;
        border-radius: 4px;
        font-family: 'Roboto Mono', monospace;
        color: #d93025;
        font-size: 0.9em;
      }
      ul {
        padding-left: 20px;
      }

      /* Arch Diagram Styles */
      .arch-grid {
        display: grid;
        grid-template-columns: 1fr 0.2fr 1fr;
        grid-template-rows: auto 0.2fr auto;
        gap: 10px;
        background: #f4f6f8;
        padding: 30px;
        border-radius: 12px;
        margin: 30px 0;
        border: 1px solid #e1e4e8;
      }
      .arch-box {
        background: white;
        padding: 20px;
        border-radius: 10px;
        border: 2px solid transparent;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        position: relative;
        min-height: 140px;
        display: flex;
        flex-direction: column;
      }
      .arch-box h4 {
        margin: 0 0 10px 0;
        font-size: 1.1em;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      .arch-box p {
        font-size: 0.9em;
        margin: 0;
        color: #666;
      }
      .arch-box ul {
        margin: 10px 0 0 0;
        padding-left: 20px;
        font-size: 0.85em;
        color: #444;
      }
      .role-human {
        border-color: #4285f4;
      }
      .role-human h4 {
        color: #1967d2;
      }
      .role-gemini {
        border-color: #aa47bc;
      }
      .role-gemini h4 {
        color: #7b1fa2;
      }
      .role-env {
        border-color: #ff5722;
      }
      .role-env h4 {
        color: #e64a19;
      }
      .role-mcp {
        border-color: #fbbc04;
      }
      .role-mcp h4 {
        color: #b06000;
      }

      .arrow-container {
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
        text-align: center;
      }
      .arrow-text {
        background: #fff;
        padding: 2px 8px;
        border-radius: 12px;
        font-size: 0.75em;
        color: #555;
        border: 1px solid #ddd;
        position: absolute;
        z-index: 1;
        white-space: nowrap;
      }
      .arrow-line {
        width: 100%;
        height: 2px;
        background: #ccc;
        position: relative;
      }
      .arrow-line::after {
        content: 'â–¶';
        position: absolute;
        right: -5px;
        top: -7px;
        color: #ccc;
        font-size: 12px;
      }
      .arrow-vertical .arrow-line {
        width: 2px;
        height: 100%;
      }
      .arrow-vertical .arrow-line::after {
        right: -5px;
        bottom: -5px;
        top: auto;
        transform: rotate(90deg);
      }
      .arrow-left .arrow-line::after {
        left: -5px;
        right: auto;
        transform: rotate(180deg);
      }

      .area-human {
        grid-area: 1 / 1 / 2 / 2;
      }
      .area-gemini {
        grid-area: 1 / 3 / 2 / 4;
      }
      .area-env {
        grid-area: 3 / 1 / 4 / 2;
      }
      .area-mcp {
        grid-area: 3 / 3 / 4 / 4;
      }
      .conn-top {
        grid-area: 1 / 2 / 2 / 3;
      }
      .conn-left {
        grid-area: 2 / 1 / 3 / 2;
      }
      .conn-right {
        grid-area: 2 / 3 / 3 / 4;
      }
      .conn-bottom {
        grid-area: 3 / 2 / 4 / 3;
      }

      /* MCP Internal Logic Styles */
      .mcp-logic-container {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        background: #fff;
        padding: 25px;
        border: 1px dashed #aaa;
        border-radius: 8px;
        margin-top: 20px;
      }
      .logic-step {
        text-align: center;
        flex: 1;
        padding: 10px;
        min-height: 180px;
      }
      .logic-icon {
        font-size: 2em;
        display: block;
        margin-bottom: 10px;
      }
      .logic-arrow {
        font-size: 1.5em;
        color: #ccc;
        align-self: center;
        margin-top: 50px;
      }
      .logic-label {
        font-weight: bold;
        display: block;
        margin-bottom: 8px;
        color: #444;
      }
      .logic-sub {
        font-size: 0.8em;
        color: #666;
        margin-bottom: 8px;
        display: block;
      }
      .code-box {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 10px;
        border-radius: 6px;
        text-align: left;
        font-family: 'Roboto Mono', monospace;
        font-size: 0.75em;
        border-left: 3px solid;
        margin-bottom: 5px;
      }
      .box-purple {
        border-color: #9c27b0;
      }
      .file-list {
        text-align: left;
        font-size: 0.8em;
        list-style: none;
        padding: 0;
        margin: 0 auto;
        display: inline-block;
      }
      .file-list li {
        margin-bottom: 4px;
        display: flex;
        align-items: center;
        gap: 5px;
      }

      /* Reference Section Styles */
      .ref-concept {
        display: flex;
        gap: 20px;
        align-items: center;
        background: #f9f9f9;
        padding: 20px;
        border-radius: 8px;
        border-left: 5px solid #666;
        margin-bottom: 20px;
      }
      .ref-text {
        flex: 1;
      }
      .ref-code-block {
        background: #222;
        color: #fff;
        padding: 15px;
        border-radius: 5px;
        font-family: 'Roboto Mono', monospace;
        font-size: 0.85em;
        overflow-x: auto;
      }
      .comment {
        color: #6a9955;
      }
      .keyword {
        color: #569cd6;
      }
      .type {
        color: #4ec9b0;
      }

      /* Directory Structure Styles */
      .dir-tree {
        background: #282c34;
        color: #abb2bf;
        padding: 20px;
        border-radius: 8px;
        font-family: 'Roboto Mono', monospace;
        font-size: 0.85em;
        line-height: 1.5;
        white-space: pre;
        overflow-x: auto;
      }
      .dir-comment {
        color: #5c6370;
        font-style: italic;
      }
      .dir-folder {
        color: #61afef;
        font-weight: bold;
      }
      .dir-file {
        color: #e5c07b;
      }
    </style>
  </head>
  <body>
    <h1>
      GASé–‹ç™ºã‚¿ãƒ¼ãƒœåŒ–è¨ˆç”» v4.1ï¼šHono x AIãƒã‚¤ãƒ†ã‚£ãƒ–ãƒ»ãƒ¦ãƒ‹ãƒ•ã‚¡ã‚¤ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
    </h1>

    <div class="section">
      <h2>1. ä¼ç”»æ¦‚è¦</h2>
      <p>
        æœ¬ä¼ç”»ã¯ã€Google Apps Script (GAS)
        é–‹ç™ºã«ãŠã‘ã‚‹ã€Œå£Šã‚Œã‚„ã™ã•ã€ã€Œãƒ†ã‚¹ãƒˆã®ã—ã«ãã•ã€ã€ŒSPAé€£æºã®é›£ã—ã•ã€ã‚’ä¸€æŒ™ã«è§£æ±ºã™ã‚‹ã‚½ãƒªãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚<br />
        <strong>Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã€ŒHonoã€ã‚’ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨ã—ã¦æ¡ç”¨</strong
        >ã—ã€AIï¼ˆMCPï¼‰ãŒè¤‡é›‘ãªã‚¤ãƒ³ãƒ•ãƒ©ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå¾‹ç”Ÿæˆã€‚
        <strong>ã€Œ1ã¤ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã€</strong
        >ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«APIã‚µãƒ¼ãƒãƒ¼ã¨ã—ã¦ã‚‚ã€æœ¬ç•ªGASã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚‚ã€å®Œå…¨ã«åŒä¸€ã®æŒ™å‹•ã‚’å®Ÿç¾ã—ã¾ã™ã€‚
      </p>
      <div class="highlight-box">
        <span class="highlight-title"
          >New Concept: Hono Adapter & Independent MCP</span
        >
        GASã‚’ã€Œæ™®é€šã®Webã‚µãƒ¼ãƒãƒ¼ã€ã¨ã—ã¦æŒ¯ã‚‹èˆã‚ã›ã€Webã‚¢ãƒ—ãƒªé–‹ç™ºã«æ‹¡å¼µå¯èƒ½ã€‚AIãƒ„ãƒ¼ãƒ«ã¯ç‹¬ç«‹ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ç®¡ç†ã—ã€é–‹ç™ºç’°å¢ƒã‚’æ±šæŸ“ã—ãªã„ã€‚
      </div>
    </div>

    <div class="section">
      <h2>2. æˆ¦ç•¥çš„æ„ç¾©ï¼šãã‚Œã§ã‚‚ãªãœGASã‚’é¸ã¶ã®ã‹ï¼Ÿ</h2>
      <p>
        ã€Œã“ã“ã¾ã§Webæ¨™æº–æŠ€è¡“ï¼ˆHono, REST API,
        Viteï¼‰ã‚’ãƒ•ãƒ«æ´»ç”¨ã™ã‚‹ãªã‚‰ã€æœ€åˆã‹ã‚‰Cloud
        Runã‚„AWSã‚’ä½¿ãˆã°è‰¯ã„ã®ã§ã¯ï¼Ÿã€<br />
        æŠ€è¡“çš„ã«ã¯æ­£è«–ã§ã™ãŒã€<strong>ãƒ“ã‚¸ãƒã‚¹ã¨é‹ç”¨ã®è¦³ç‚¹ã‹ã‚‰ã¯ã€Œã‚ãˆã¦GASã‚’é¸ã¶ã€å¼·åŠ›ãªç†ç”±</strong>ãŒ4ã¤å­˜åœ¨ã—ã¾ã™ã€‚
      </p>

      <div class="setup-grid">
        <div class="setup-card" style="border-left: 4px solid #137333">
          <strong style="color: #137333">1. å®Œå…¨ç„¡æ–™ã®ç¤¾å†…ã‚¤ãƒ³ãƒ•ãƒ©</strong>
          <p style="font-size: 0.9em; margin-top: 5px">
            ã‚µãƒ¼ãƒãƒ¼ä»£ï¼ˆGASï¼‰ã‚‚ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä»£ï¼ˆSpreadsheetï¼‰ã‚‚ç„¡æ–™ã€‚æœˆé¡0å††ã§æ°¸ç¶šçš„ã«é‹ç”¨å¯èƒ½ãªç’°å¢ƒã¯ã€GASä»¥å¤–ã«å­˜åœ¨ã—ã¾ã›ã‚“ã€‚
          </p>
        </div>
        <div class="setup-card" style="border-left: 4px solid #1967d2">
          <strong style="color: #1967d2">2. èªè¨¼ãƒ»èªå¯ã®å³æ™‚æ§‹ç¯‰</strong>
          <p style="font-size: 0.9em; margin-top: 5px">
            ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«ã€Œãƒ‰ãƒ¡ã‚¤ãƒ³å†…ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã€ã‚’é¸ã¶ã ã‘ã§ã€å …ç‰¢ãªGoogleèªè¨¼ä»˜ãç¤¾å†…ãƒ„ãƒ¼ãƒ«ãŒå®Œæˆã—ã¾ã™ã€‚å®Ÿè£…ã‚³ã‚¹ãƒˆã¯ã‚¼ãƒ­ã§ã™ã€‚
          </p>
        </div>
        <div class="setup-card" style="border-left: 4px solid #f9ab00">
          <strong style="color: #f9ab00">3. å±äººåŒ–ã—ãªã„ä¿å®ˆæ€§</strong>
          <p style="font-size: 0.9em; margin-top: 5px">
            AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®å¼•ãç¶™ãã¯å›°é›£ã§ã™ãŒã€GASãªã‚‰ã€Œã‚·ãƒ¼ãƒˆã®å…±æœ‰ã€ã ã‘ã§ç®¡ç†æ¨©é™ã‚’ç§»è­²ã§ãã¾ã™ã€‚éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã§ã‚‚ãƒ‡ãƒ¼ã‚¿ç®¡ç†ãŒå¯èƒ½ã§ã™ã€‚
          </p>
        </div>
        <div class="setup-card" style="border-left: 4px solid #e64a19">
          <strong style="color: #e64a19">4. æœ€é«˜ã®ã‚¤ã‚°ã‚¸ãƒƒãƒˆæˆ¦ç•¥</strong>
          <p style="font-size: 0.9em; margin-top: 5px">
            æœ¬æ§‹æˆã¯Webæ¨™æº–æŠ€è¡“ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ãŸã‚ã€GASã®é™ç•ŒãŒæ¥ãŸã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ãã®ã¾ã¾Cloud
            Runç­‰ã¸ç§»è¡Œï¼ˆExitï¼‰å¯èƒ½ã§ã™ã€‚ã€ŒGASãƒ­ãƒƒã‚¯ã‚¤ãƒ³ã€ã‚’å›é¿ã—ã¾ã™ã€‚
          </p>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>3. è§£æ±ºã™ã‚‹èª²é¡Œã¨ãƒ¡ãƒªãƒƒãƒˆ</h2>
      <div class="merit-grid">
        <div class="merit-card">
          <span class="tag tag-hono">Hono</span>
          <span class="merit-icon">ğŸ”¥</span>
          <h3>Webæ¨™æº– APIåŒ–</h3>
          <p>
            GASç‰¹æœ‰ã®<code>doGet</code>ã«ä¾å­˜ã›ãšã€Honoã®ãƒ«ãƒ¼ã‚¿ãƒ¼æ©Ÿèƒ½ã§<code>/api/users</code>ã®ã‚ˆã†ãªæ¨™æº–çš„ãªREST
            APIã‚’æ§‹ç¯‰ã€‚Webã‚¢ãƒ—ãƒªã‹ã‚‰ã®æ¥ç¶šãŒæ¥µã‚ã¦å®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚
          </p>
        </div>
        <div class="merit-card">
          <span class="tag tag-arch">Architecture</span>
          <span class="merit-icon">ğŸ’</span>
          <h3>Single Source of Truth</h3>
          <p>
            REST API (Advanced Service)
            ãƒ™ãƒ¼ã‚¹ã®å˜ä¸€ã‚³ãƒ¼ãƒ‰ã«ã‚ˆã‚Šã€ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆã§ã®ã€Œæ›¸å¼è¨­å®šã€ã‚„ã€Œãƒ¡ãƒ¼ãƒ«é€ä¿¡ã€ã¾ã§ã‚‚ãŒæœ¬ç•ªã¨å®Œå…¨ã«ä¸€è‡´ã—ã¾ã™ã€‚
          </p>
        </div>
        <div class="merit-card">
          <span class="tag tag-tech">AI Agent</span>
          <span class="merit-icon">ğŸ¤–</span>
          <h3>è¤‡é›‘æ€§ã®éš è”½</h3>
          <p>
            äººé–“ãŒæ›¸ãã¨æ•°åè¡Œã«ãªã‚‹è¤‡é›‘ãªGoogle
            APIã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆJSONã‚‚ã€AIãªã‚‰ä¸€ç¬ã§ç”Ÿæˆã€‚é¢å€’ãªã‚¤ãƒ³ãƒ•ãƒ©å±¤ã¯ã™ã¹ã¦AIã«ãŠä»»ã›ã€‚
          </p>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>4. ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹æˆå›³</h2>

      <h3>4.1 Human-AI Interaction Loop</h3>
      <p>
        HonoãŒã€Œå…¥ã‚Šå£ã€ã‚’ã€Native
        FetchãŒã€Œå‡ºå£ã€ã‚’æ‹…å½“ã—ã€AIãŒãã®é–“ã‚’ç¹‹ãã¾ã™ã€‚
      </p>

      <div class="arch-grid">
        <div class="arch-box role-human area-human">
          <h4>ğŸ‘¨â€ğŸ’» äººé–“ (é–‹ç™ºè€…)</h4>
          <p><strong>å½¹å‰²:</strong> ãƒ­ã‚¸ãƒƒã‚¯ & UIå®Ÿè£…</p>
          <ul>
            <li>VS Codeã§ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</li>
            <li>Geminiã¸ã®æŒ‡ç¤ºå‡ºã—</li>
            <li>ãƒ­ãƒ¼ã‚«ãƒ«ã§Webã‚¢ãƒ—ãƒªç¢ºèª</li>
          </ul>
        </div>

        <div class="arrow-container conn-top">
          <div class="arrow-text">
            è‡ªç„¶è¨€èªã§æŒ‡ç¤º<br />"APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆè¿½åŠ "
          </div>
          <div class="arrow-line"></div>
        </div>

        <div class="arch-box role-gemini area-gemini">
          <h4>âœ¨ Gemini (AI Agent)</h4>
          <p><strong>å½¹å‰²:</strong> è¨­è¨ˆ & Honoå®Ÿè£…</p>
          <ul>
            <li>ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®æ„å›³ã‚’è§£æ</li>
            <li>Honoãƒ«ãƒ¼ã‚¿ãƒ¼è¨­è¨ˆ</li>
            <li>MCPã¸å®Ÿè£…å‘½ä»¤</li>
          </ul>
        </div>

        <div class="arrow-container conn-left arrow-vertical">
          <div class="arrow-text">ãƒ­ãƒ¼ã‚«ãƒ«ã§<br />å®Œå…¨å†ç¾</div>
          <div class="arrow-line"></div>
        </div>

        <div class="arrow-container conn-right arrow-vertical">
          <div class="arrow-text">Tool Call<br />(scaffold_unified)</div>
          <div class="arrow-line"></div>
        </div>

        <div class="arch-box role-env area-env">
          <h4>ğŸ“ Hono x GASç’°å¢ƒ</h4>
          <p><strong>å½¹å‰²:</strong> å®Ÿè¡Œç’°å¢ƒ</p>
          <ul>
            <li><code>src/index.ts</code> (Hono App)</li>
            <li><code>src/features/</code> (Unified Repo)</li>
            <li><code>dist/</code> (Bundle Artifacts)</li>
          </ul>
        </div>

        <div class="arrow-container conn-bottom arrow-left">
          <div class="arrow-text">ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ<br />è¨­å®šæ›´æ–°</div>
          <div class="arrow-line"></div>
        </div>

        <div class="arch-box role-mcp area-mcp">
          <h4>âš™ï¸ ç‹¬ç«‹MCPã‚µãƒ¼ãƒãƒ¼</h4>
          <p><strong>å½¹å‰²:</strong> å¤–éƒ¨ãƒ­ãƒœãƒƒãƒˆã‚¢ãƒ¼ãƒ </p>
          <ul>
            <li>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå¤–ã§å‹•ä½œ</li>
            <li>ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ (fs)</li>
            <li>JSONãƒ“ãƒ«ãƒ€ãƒ¼</li>
          </ul>
        </div>
      </div>

      <h3>4.2 MCPå†…éƒ¨ã®å‡¦ç†ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼šUnified Code Generator</h3>
      <p>
        AIã¯ã€ŒHonoã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã€ã¨ã€ŒREST
        APIãƒªãƒã‚¸ãƒˆãƒªã€ã‚’ã‚»ãƒƒãƒˆã§ç”Ÿæˆã—ã€å³åº§ã«APIã¨ã—ã¦åˆ©ç”¨å¯èƒ½ã«ã—ã¾ã™ã€‚
      </p>

      <div class="mcp-logic-container">
        <div class="logic-step">
          <span class="logic-icon">ğŸ“¥</span>
          <span class="logic-label">1. Input (Tool Call)</span>
          <div class="code-box">
            { "api": "POST /api/highlight", "logic": "Salesã‚»ãƒ«ã‚’èµ¤ãã™ã‚‹" }
          </div>
        </div>

        <div class="logic-arrow">â¡</div>

        <div class="logic-step" style="background: #f3e5f5; border-radius: 8px">
          <span class="logic-icon">âš™ï¸</span>
          <span class="logic-label">2. Process</span>
          <div class="code-box box-purple">
            // Hono Route<br />
            app.post(...)<br />
            // REST JSON<br />
            { requests: [...] }
          </div>
        </div>

        <div class="logic-arrow">â¡</div>

        <div class="logic-step">
          <span class="logic-icon">ğŸ“„</span>
          <span class="logic-label">3. Output</span>
          <ul class="file-list">
            <li>ğŸ”¥ <code>index.ts</code> (Routeè¿½è¨˜)</li>
            <li>ğŸ’œ <code>UniversalRepo.ts</code></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="section">
      <h2>5. MCPã‚µãƒ¼ãƒãƒ¼ãŒæä¾›ã™ã‚‹æ©Ÿèƒ½ (The Big 3)</h2>
      <p>
        AIãƒ„ãƒ¼ãƒ«ã¯ç‹¬ç«‹ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦ç®¡ç†ã•ã‚Œã€GASã‚¢ãƒ—ãƒªã«å¯¾ã—ã¦å¤–å´ã‹ã‚‰æ“ä½œã‚’è¡Œã„ã¾ã™ã€‚
      </p>

      <table>
        <thead>
          <tr>
            <th style="width: 25%">Toolå</th>
            <th style="width: 20%">ã‚«ãƒ†ã‚´ãƒª</th>
            <th>æ©Ÿèƒ½è©³ç´°</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><code>setup_named_range</code></td>
            <td>
              <span class="tag tag-arch" style="margin: 0">Infrastructure</span>
            </td>
            <td>
              <strong>å¯¾è©±å‹ãƒ»ç¯„å›²å®šç¾©ã‚¦ã‚£ã‚¶ãƒ¼ãƒ‰</strong><br />
              APIçµŒç”±ã§ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã«ã€Œåå‰ä»˜ãç¯„å›²ã€ã‚’è¨­å®šã—ã€ã‚³ãƒ¼ãƒ‰å†…ã®å®šæ•°ã¨åŒæœŸã€‚åˆ—ã®æŒ¿å…¥ãƒ»ç§»å‹•ã«å¼·ã„å …ç‰¢ãªãƒ‡ãƒ¼ã‚¿åŸºç›¤ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚
            </td>
          </tr>
          <tr>
            <td><code>scaffold_feature</code></td>
            <td>
              <span class="tag tag-hono" style="margin: 0">Hono/Coding</span>
            </td>
            <td>
              <strong>ãƒ•ãƒ«ã‚¹ã‚¿ãƒƒã‚¯APIç”Ÿæˆ</strong><br />
              Honoã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°å®šç¾©ã¨ã€Advanced Service (REST API)
              ã‚’åˆ©ç”¨ã—ãŸãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ©ã‚¹ã‚’ä¸€æ‹¬ç”Ÿæˆã€‚Web
              APIã¨ã—ã¦å³åº§ã«ç–é€šå¯èƒ½ãªçŠ¶æ…‹ã‚’ä½œã‚‹ã€‚
            </td>
          </tr>
          <tr>
            <td><code>sync_local_secrets</code></td>
            <td>
              <span class="tag tag-platform" style="margin: 0">Setup</span>
            </td>
            <td>
              <strong>ç’°å¢ƒæ§‹ç¯‰ã‚ªãƒ¼ãƒˆãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³</strong><br />
              GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã€APIæœ‰åŠ¹åŒ–ãƒã‚§ãƒƒã‚¯ã€JSONéµé…ç½®ã‚’è‡ªå‹•åŒ–ã€‚ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã«å¿…è¦ãªèªè¨¼å‘¨ã‚Šã®ãƒˆãƒ©ãƒ–ãƒ«ã‚’æ’²æ»…ã™ã‚‹ã€‚
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="section">
      <h2>6. ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã®ãŸã‚ã®ã‚¤ãƒ³ãƒ•ãƒ©æº–å‚™ (One-time Setup)</h2>
      <div class="setup-grid">
        <div class="setup-card">
          <strong>1. GCPãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ</strong>
          <p style="font-size: 0.9em; margin-top: 5px">
            GASç´ä»˜ã‘ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç”¨æ„
          </p>
        </div>
        <div class="setup-card">
          <strong>2. APIæœ‰åŠ¹åŒ–</strong>
          <p style="font-size: 0.9em; margin-top: 5px">Google Sheets APIã‚’ON</p>
        </div>
        <div class="setup-card">
          <strong>3. ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ</strong>
          <p style="font-size: 0.9em; margin-top: 5px">JSONéµã‚’ä½œæˆ & DL</p>
        </div>
        <div class="setup-card">
          <strong>4. æ¨©é™ä»˜ä¸</strong>
          <p style="font-size: 0.9em; margin-top: 5px">
            Botãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’æ‹›å¾…
          </p>
        </div>
      </div>
      <div class="warning-box">
        <span class="warning-title">âš ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</span>
        JSONéµã¯
        <code>.gitignore</code>
        ã«è¿½åŠ ã—ã€çµ¶å¯¾ã«ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã§ãã ã•ã„ã€‚
      </div>
    </div>

    <div class="section">
      <h2>7. æ¨å¥¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆï¼šWorkspace Hybrid</h2>
      <p>
        <strong>MCPã‚µãƒ¼ãƒãƒ¼ã‚’ç‹¬ç«‹ã—ãŸãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆSibling Projectï¼‰</strong
        >ã¨ã—ã¦é…ç½®ã—ã€GASã‚¢ãƒ—ãƒªå´ã¯Honoã‚’ä¸­å¿ƒã«æ§‹æˆã—ã¾ã™ã€‚<br />
        ã“ã‚Œã«ã‚ˆã‚Šã€AIãƒ„ãƒ¼ãƒ«è‡ªä½“ã‚’åˆ¥ãƒªãƒã‚¸ãƒˆãƒªã¨ã—ã¦ç®¡ç†ã—ãŸã‚Šã€ãƒãƒ¼ãƒ é–“ã§å…±æœ‰ã™ã‚‹ã“ã¨ãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚
      </p>

      <div class="dir-tree">
        root/ â”œâ”€â”€ <span class="dir-folder">gas-app/</span>
        <span class="dir-comment"
          ># ğŸš€ [GASã‚¢ãƒ—ãƒªæœ¬ä½“] Hono + Unified Repo</span
        >
        â”‚ â”œâ”€â”€ .clasp.json
        <span class="dir-comment"># dist/ ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤å¯¾è±¡ã«</span> â”‚ â”œâ”€â”€
        package.json â”‚ â”œâ”€â”€ build.js
        <span class="dir-comment"># esbuildè¨­å®š (Honoãƒãƒ³ãƒ‰ãƒ«ç”¨)</span> â”‚ â”œâ”€â”€
        secrets/ <span class="dir-comment"># ğŸ” [Localå°‚ç”¨] èªè¨¼éµ</span> â”‚ â”œâ”€â”€
        <span class="dir-folder">src/</span> â”‚ â”‚ â”œâ”€â”€ index.ts
        <span class="dir-comment"># ğŸ”¥ [å…±é€š] Honoã‚¢ãƒ—ãƒªå®šç¾© (Routes)</span> â”‚ â”‚
        â”œâ”€â”€ entry-node.ts<span class="dir-comment"
          ># ğŸŸ¢ [Local] Nodeã‚µãƒ¼ãƒãƒ¼èµ·å‹• (localhost:3000)</span
        >
        â”‚ â”‚ â”œâ”€â”€ entry-gas.ts
        <span class="dir-comment"># ğŸ”´ [GAS] doGetã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼</span> â”‚ â”‚ â”œâ”€â”€
        core/ <span class="dir-comment"># ğŸ’œ Client (Fetch Polyfill)</span> â”‚ â”‚
        â””â”€â”€ features/
        <span class="dir-comment"># ğŸ“¦ Unified Repos (AIç”Ÿæˆ)</span> â”‚ â””â”€â”€
        <span class="dir-folder">test/</span>
        <span class="dir-comment"># âœ… [Localå°‚ç”¨] çµåˆãƒ†ã‚¹ãƒˆ</span> â”‚ â””â”€â”€
        features/ â”‚ â””â”€â”€ <span class="dir-folder">mcp-server/</span>
        <span class="dir-comment"># âš™ï¸ [ç‹¬ç«‹AIãƒ„ãƒ¼ãƒ«] é–‹ç™ºæ”¯æ´ãƒ­ãƒœãƒƒãƒˆ</span>
        â”œâ”€â”€ package.json â”œâ”€â”€ src/ â”‚ â”œâ”€â”€ tools/
        <span class="dir-comment"># scaffold_feature (Honoå¯¾å¿œç‰ˆ)</span> â”‚ â””â”€â”€
        templates/
        <span class="dir-comment"># Honoã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ç­‰ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</span>
        â””â”€â”€ index.ts <span class="dir-comment"># MCPã‚µãƒ¼ãƒãƒ¼èµ·å‹•</span>
      </div>

      <p style="margin-top: 15px; font-size: 0.9em">
        <strong>ãƒã‚¤ãƒ³ãƒˆï¼š</strong><br />
        <code>gas-app</code> ã¨
        <code>mcp-server</code> ã¯å®Œå…¨ã«åˆ†é›¢ã•ã‚Œã¦ã„ã¾ã™ã€‚AIã¯
        <code>mcp-server</code> ã‹ã‚‰
        <code>gas-app</code> å†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ“ä½œã—ã¾ã™ã€‚<br />
        GASã«ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã®ã¯
        <code>gas-app/dist/bundle.js</code>
        ã®ã¿ã¨ãªã‚Šã€æ§‹æˆãŒéå¸¸ã«ã‚¯ãƒªãƒ¼ãƒ³ã§ã™ã€‚
      </p>
    </div>

    <div class="section">
      <h2>8. å‚è€ƒè³‡æ–™ï¼šHono x REST APIçµ±ä¸€ã®å®Ÿè£…ä¾‹</h2>
      <p>
        HonoãŒã€Œãƒ«ãƒ¼ã‚¿ãƒ¼ã€ã¨ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ã€Unified
        RepoãŒã€ŒFetchã€ã§Google APIã‚’å©ãæµã‚Œã§ã™ã€‚
      </p>

      <div class="ref-concept">
        <div class="ref-text">
          <h3>ğŸ”„ å‡¦ç†ã®æµã‚Œ (Local / GAS å…±é€š)</h3>
          <p>
            1. <strong>Request:</strong>
            <code>POST /api/highlight</code> (Webæ¨™æº–)<br />
            2.
            <strong>Hono:</strong>
            ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’è§£æã—ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å®Ÿè¡Œ<br />
            3. <strong>Repo:</strong> è¤‡é›‘ãªJSONã‚’æ§‹ç¯‰ã—ã€<code>fetch</code>
            ã§Google APIã¸é€ä¿¡<br />
            4. <strong>Response:</strong>
            <code>c.json({ success: true })</code> ã‚’è¿”å´
          </p>
        </div>
      </div>

      <h3>ğŸ“ Hono + Universal Repo ã‚³ãƒ¼ãƒ‰ä¾‹</h3>

      <div class="ref-code-block" style="border: 1px solid #ff5722">
        <span class="comment">// src/index.ts (Hono App)</span>
        <span class="keyword">const</span> app =
        <span class="keyword">new</span> Hono(); app.post(<span class="string"
          >'/api/highlight'</span
        >, <span class="keyword">async</span> (c) => {
        <span class="comment">// 1. Honoã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆè§£æ</span>
        <span class="keyword">const</span> { range } =
        <span class="keyword">await</span> c.req.json();

        <span class="comment"
          >// 2. Unified Repoã‚’åˆ©ç”¨ (ä¸­èº«ã¯REST API + Fetch Polyfill)</span
        >
        <span class="keyword">const</span> repo =
        <span class="keyword">new</span> UniversalSheetRepo();
        <span class="keyword">await</span> repo.setRedBackground(range);

        <span class="keyword">return</span> c.json({ status:
        <span class="string">'ok'</span> }); });
      </div>

      <br />

      <div class="ref-code-block" style="border: 1px solid #9c27b0">
        <span class="comment"
          >// src/features/sheets/UniversalSheetRepo.ts (AIç”Ÿæˆ)</span
        >
        <span class="keyword">export class</span> UniversalSheetRepo {
        <span class="keyword">async</span> setRedBackground(range: string) {
        <span class="comment">// AIãŒç”Ÿæˆã—ãŸè¤‡é›‘ãªJSON</span>
        <span class="keyword">const</span> resource = { requests: [{ repeatCell:
        { ... } }] };

        <span class="comment"
          >// Fetch Polyfillã§é€ä¿¡ (GASã§ã‚‚Nodeã§ã‚‚å‹•ã)</span
        >
        <span class="keyword">await</span> apiClient.post(<span class="string"
          >'https://sheets.googleapis.com/...'</span
        >, resource); } }
      </div>
    </div>
  </body>
</html>
